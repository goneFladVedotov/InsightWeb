# InsightWeb

**InsightWeb** — это пример учебно-демонстрационного проекта веб-аналитики, состоящий из нескольких модулей. Основная задача платформы — собирать данные о поведении пользователей на сайтах (просмотры страниц, клики, события и т.д.), обрабатывать эти данные и предоставлять дашборды и отчёты для анализа.

## Содержание

1. [Описание проекта](#описание-проекта)
2. [Основные возможности](#основные-возможности)
3. [Архитектура](#архитектура)
4. [Технологический стек](#технологический-стек)
5. [Состав репозитория](#состав-репозитория)
6. [Требования к окружению](#требования-к-окружению)

---

## Описание проекта

InsightWeb задуман как **упрощённый аналог** сервисов веб-аналитики (Google Analytics, Matomo, Plausible и т.д.). Его задача — собрать и обработать события от пользователей, посещающих сайт, и предоставить владельцам сайтов **гибкие отчёты** по поведению и вовлечённости аудитории.

_Ключевые этапы обработки:_
1. Сбор данных (через встраиваемый веб-трекер).
2. Приём и первичная обработка событий (Ingestion Server).
3. Передача сообщений в очередь (Kafka).
4. Аналитический пайплайн (Spark / Flink) и запись в хранилища (ClickHouse, PostgreSQL и т.д.).
5. Визуализация и работа с данными (Dashboard UI / API).

---

## Основные возможности

- **Веб-трекер (JavaScript)** для сбора данных о просмотрах страниц, кликах, реферере, UTM-метках и т.д.
- **Сервер приёма данных (Ingestion)** на Spring Boot (Java/Kotlin), принимающий POST-запросы от трекера.
- **Интеграция с Kafka** (или RabbitMQ) для буферизации и надёжной передачи событий.
- **Обработка данных** (Apache Flink или Spark Streaming) для подсчёта ключевых метрик в реальном времени (просмотры, уникальные пользователи, конверсии).
- **OLAP-хранилище (ClickHouse)** для быстрых аналитических запросов.
- **API** (REST/GraphQL) и **UI** (React/Vue.js) для визуализации дашбордов и отчётов.
- **Мониторинг** (Prometheus, Grafana) и **логирование** (ELK/EFK) для наблюдения за состоянием системы.

---

## Архитектура

Ниже упрощённая схема процессов в InsightWeb:

```
[Веб-трекер JS] --(HTTP POST)--> [Ingestion Server] --(Kafka)--> [Stream Processing (Flink/Spark)]
                                   |                                     |
                                   v                                     v
                                [Хранилище (OLAP, NoSQL, etc.)] <--- [Агрегированные данные]
                                   ^
                                   |
                                [API/Backend] --(HTTP)--> [Frontend UI]
```

1. **Веб-трекер** на стороне клиента отправляет события при просмотре страниц, кликах и т.д.
2. **Сервер приёма (Ingestion)** принимает данные по HTTP, проводит валидацию, затем отправляет их в очередь (Kafka).
3. **Стриминговая обработка** (Spark/Flink) берёт события из очереди, очищает/обогащает и сохраняет агрегаты в хранилище (ClickHouse, PostgreSQL, Cassandra).
4. **API** предоставляет доступ к агрегированным метрикам и данным через REST/GraphQL.
5. **UI** визуализирует данные: графики, таблицы, дашборды.

---

## Технологический стек

- **Язык и платформы**:
    - Java (Backend, Ingestion Server)
    - JavaScript (Веб-трекер, UI)
- **Фреймворки**:
    - Spring Boot (для сервера приёма данных и API)
    - React.js (Frontend)
- **Очереди**: Apache Kafka или RabbitMQ
- **Обработка данных**: Apache Flink или Apache Spark (Streaming)
- **Хранилища**:
    - ClickHouse (OLAP)
    - PostgreSQL (транзакционные данные, метаданные)
- **Мониторинг и логирование**: Prometheus, Grafana, EFK/ELK

---

## Состав репозитория

Примерная структура (может отличаться в зависимости от конкретной реализации):

```
insightweb/
├── ingestion-server/               # Сервер приёма данных (Spring Boot, Java/Kotlin)
│   ├── src/...
│   └── pom.xml / build.gradle
├── tracker/                        # Код веб-трекера (JavaScript)
│   └── insightweb.js
├── processing-pipeline/            # Пайплайн обработки данных (Spark/Flink)
│   └── src/...
├── analytics-api/                  # Дополнительный модуль с API (GraphQL / REST)
├── dashboard-ui/                   # Веб-приложение для дашборда (React/Vue)
└── docs/                           # Дополнительные материалы, схемы, диаграммы
```

---

## Требования к окружению

- **Java 21** (для серверных модулей)
- **Maven** (для сборки Spring Boot-приложений)
- **Node.js + npm** (если нужно собрать трекер и UI, например React)
- **Docker** (опционально, если запускаете Kafka, ZooKeeper, ClickHouse и т.д. через контейнеры)
- **Git** (для управления версиями)


**Приятного изучения InsightWeb!**  
Если возникнут вопросы или предложения, открывайте Issues в репозитории или пишите в раздел Discussions.